<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  
    <title type="text" xml:lang="en">DataScience Blog</title>
    <link type="application/atom+xml" rel="self" href="http://santhosh114.github.io//atom.xml"/>
  
  <link href="http://santhosh114.github.io//"/>
  <id>http://santhosh114.github.io//</id>
  <updated>2017-03-30T12:42:01Z</updated>
  <author>
    <name>Santhosh</name>
    <email>santhosh.fiddle@gmail.com</email>
  </author>
  <rights type="text">Copyright © 2017 Santhosh. All rights reserved.</rights>
  
  <entry>
  <title type="text">Interactive Visualization of US Airport Evolution</title>
  <link rel="alternate" type="text/html" href="http://santhosh114.github.io//airport.html" />
  <id>http://santhosh114.github.io//airport</id>
  <published>2015-11-10T00:00:00Z</published>
  <updated>2015-11-10T00:00:00Z</updated>
  <content type="html"><![CDATA[ <style>.container {
  width: auto;
  max-width: 1060px;
  text-align: center;

}
</style>

<div id="us_states">
</div>
<script src="//code.jquery.com/jquery-2.0.0.js"></script>

<script src="//d3js.org/d3.v3.min.js"></script>

<script src="//d3js.org/topojson.v1.min.js"></script>

<script src="airport/airport_viz.js"></script>

<blockquote>
  <p>This is an academic project for I590: Data Visualization course at <a href="https://www.indiana.edu">Indiana University, Bloomington</a>, Instructor: <a href="http://yongyeol.com">Yong Yeol Ahn</a>. Visit the project <a href="http://www.santhoshfiddle.com/geoSample/index.html">page</a> for more info on this concept ideation and our team.</p>
</blockquote>

<div class="myNote"></div>

<div class="divider"></div>
<p><a href="../research/Airport-evolution-Project.pdf">View this project research report presentation. </a></p>

<h3 id="overview"><a href="">Overview:</a></h3>

<p>This is a walkthrough of my project on creating interactive transitions using tween functions on objects tied to a map/geo-location in D3.js.</p>

<p>Everything here is rendered in SVG!</p>

<p>This US map is generated from the <a href="../geoSample/us.json">US.json</a></p>

<!-- Check my blog titled ["Basemaps with d3.js"]() for how the US map is generated with TopoJSON and many other ways of representing cartograms.  -->

<div class="divider"></div>

<div class="divider"></div>

<h5>United States - Basemap:</h5>

<div id="states">
<script type="text/javascript">
(function() {

var projection = d3.geo.albersUsa()
    .scale(1000)
    .translate([800/2, 500/2]);

var path = d3.geo.path()
    .projection(projection);

var svg = d3.select("#states").append("svg")
    .attr("width", 750)
    .attr("height", 500);

d3.json("airport/us.json", function(error, us) {
  if (error) return console.error(error);
  console.log(us);

  svg.selectAll("path")
     .data(topojson.feature(us, us.objects.states).features)
      .enter()
      .append("path")
      .attr("d", path)
      .attr("fill", "LightGray")
      .attr("stroke", "White")
      .on("mouseover", function(d) {
          d3.select(this).style("fill", "CornflowerBlue");
          })                  
      .on("mouseout", function(d) {
           d3.select(this).style("fill", "LightGray");
          });

});


})();
</script>
</div>

<p>The .on(“mouseover”,…) part is what makes this map interactive!</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

<span class="kd">var</span> <span class="nx">projection</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">albersUsa</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">translate</span><span class="p">([</span><span class="mi">800</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">500</span><span class="o">/</span><span class="mi">2</span><span class="p">]);</span>

<span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">path</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">projection</span><span class="p">(</span><span class="nx">projection</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">svg</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">"#states"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">"svg"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"width"</span><span class="p">,</span> <span class="mi">750</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"height"</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span>

<span class="nx">d3</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="s2">"airport/us.json"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">us</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">return</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">us</span><span class="p">);</span>

  <span class="nx">svg</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">"path"</span><span class="p">)</span>
     <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">topojson</span><span class="p">.</span><span class="nx">feature</span><span class="p">(</span><span class="nx">us</span><span class="p">,</span> <span class="nx">us</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">states</span><span class="p">).</span><span class="nx">features</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">enter</span><span class="p">()</span>
      <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">"path"</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"d"</span><span class="p">,</span> <span class="nx">path</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"fill"</span><span class="p">,</span> <span class="s2">"LightGray"</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"stroke"</span><span class="p">,</span> <span class="s2">"White"</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"mouseover"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">"fill"</span><span class="p">,</span> <span class="s2">"CornflowerBlue"</span><span class="p">);</span>
          <span class="p">})</span>                  
      <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"mouseout"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">"fill"</span><span class="p">,</span> <span class="s2">"LightGray"</span><span class="p">);</span>
          <span class="p">});</span>
<span class="p">});</span>
<span class="p">})();</span></code></pre></figure>

<div class="divider"></div>

<div class="divider"></div>

<p>A basemap is set at this point, lets go ahead and place the bar objects based on the geo-location or Lat/Long values that we pass along as a javascript variable “sampleData”.</p>

<div id="unitedstates">
<script type="text/javascript">
(function() {

var projection = d3.geo.albersUsa()
    .scale(1000)
    .translate([800/2, 500/2]);


var path = d3.geo.path()
    .projection(projection);

var svg = d3.select("#unitedstates").append("svg")
    .attr("width", 750)
    .attr("height", 500);

d3.json("airport/us.json", function(error, us) {
  if (error) return console.error(error);
  console.log(us);

  svg.selectAll("path")
     .data(topojson.feature(us, us.objects.states).features)
      .enter()
      .append("path")
      .attr("d", path)
      .attr("fill", "LightGray")
      .attr("stroke", "White");



var  sampleData = [ {"name": "San Francisco", "coordinates": [-122.417,37.783], "barheight": 100},
            {"name": "Indiana", "coordinates": [-86.682,39.52], "barheight": 50},
            {"name": "NewYork", "coordinates": [-73.778,40.63], "barheight": 80}              
            ];

  bars = svg.selectAll("g")
    .data(sampleData)
    .enter()
    .append("g")
    .attr("transform", function(d) {return "translate(" + projection(d.coordinates) + ")";});
    
    bars.append("rect")
    .attr("transform", "rotate(180)")
    .attr('width', 10)
    .attr('height',  0)
    .style("fill", "CornflowerBlue")
    .attr('height',  function(d) {return d.barheight});

      bars.append("text")
      .style({
        'fill':'#050505',
        'font-family':'sans-serif',
        'font-size':'7px'
      })  
      .attr("dy", ".80em")
    .attr("text-anchor", "start") 
    .text(function(d) {return d.name});


  });


})();
</script>
</div>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">  <span class="kd">var</span>  <span class="nx">sampleData</span> <span class="o">=</span> <span class="p">[</span> <span class="p">{</span><span class="s2">"name"</span><span class="p">:</span> <span class="s2">"San Francisco"</span><span class="p">,</span> <span class="s2">"coordinates"</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">122.417</span><span class="p">,</span><span class="mf">37.783</span><span class="p">],</span> <span class="s2">"barheight"</span><span class="p">:</span> <span class="mi">100</span><span class="p">},{</span><span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Indiana"</span><span class="p">,</span> <span class="s2">"coordinates"</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">86.682</span><span class="p">,</span><span class="mf">39.52</span><span class="p">],</span> <span class="s2">"barheight"</span><span class="p">:</span> <span class="mi">50</span><span class="p">},</span> <span class="p">{</span><span class="s2">"name"</span><span class="p">:</span> <span class="s2">"NewYork"</span><span class="p">,</span> <span class="s2">"coordinates"</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">73.778</span><span class="p">,</span><span class="mf">40.63</span><span class="p">],</span> <span class="s2">"barheight"</span><span class="p">:</span> <span class="mi">80</span><span class="p">}];</span>

  <span class="nx">bars</span> <span class="o">=</span> <span class="nx">svg</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">"g"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">sampleData</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">enter</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">"g"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"transform"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="s2">"translate("</span> <span class="o">+</span> <span class="nx">projection</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">coordinates</span><span class="p">)</span> <span class="o">+</span> <span class="s2">")"</span><span class="p">;});</span>
    
  <span class="nx">bars</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">"rect"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"transform"</span><span class="p">,</span> <span class="s2">"rotate(180)"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'width'</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'height'</span><span class="p">,</span>  <span class="mi">0</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">"fill"</span><span class="p">,</span> <span class="s2">"CornflowerBlue"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'height'</span><span class="p">,</span>  <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">barheight</span><span class="p">});</span>

  <span class="nx">bars</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">"text"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">style</span><span class="p">({</span>
       <span class="s1">'fill'</span><span class="p">:</span><span class="s1">'#050505'</span><span class="p">,</span>
       <span class="s1">'font-family'</span><span class="p">:</span><span class="s1">'sans-serif'</span><span class="p">,</span>
       <span class="s1">'font-size'</span><span class="p">:</span><span class="s1">'7px'</span>
      <span class="p">})</span>  
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"dy"</span><span class="p">,</span> <span class="s2">".80em"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"text-anchor"</span><span class="p">,</span> <span class="s2">"start"</span><span class="p">)</span> 
    <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">name</span><span class="p">});</span>

      </code></pre></figure>

<div class="divider"></div>

<p>And to create the bar transition representing the magnitude of flights in each airport is done in the following way:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">bars</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">"rect"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"transform"</span><span class="p">,</span> <span class="s2">"rotate(180)"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'width'</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'height'</span><span class="p">,</span>  <span class="mi">0</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">"fill"</span><span class="p">,</span> <span class="s2">"CornflowerBlue"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">delay</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">i</span> <span class="o">*</span> <span class="mi">20</span><span class="p">;</span>
      <span class="p">})</span>
      <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mi">15000</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'height'</span><span class="p">,</span>  <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">barheight</span><span class="p">});</span>

        </code></pre></figure>

<div class="divider"></div>
<p>Once the bars and their magnitudes are passed to the “bars” svg variable, we are set to make the final transition of the bar into a rectangle that can hold text in it.</p>

<p>And I wont claim this as to be an ideal way to create a tooltip, infact this is not intented to be a tooltip but an overlay of line graphs similar to <a href="http://www.nytimes.com/interactive/2014/06/05/upshot/how-the-recession-reshaped-the-economy-in-255-charts.html">this @nytime_upshot</a> on mouseover event!</p>

<div id="trans">
<script type="text/javascript">
(function() {
var border=1;
var bordercolor='black';

var svg = d3.select("#trans").append("svg")
	.attr('border', border)
    .attr('width',740)
	.attr('height',300);

var borderPath = svg.append("rect")
       			.attr("x", 0)
       			.attr("y", 0)
       			.attr("height", 300)
       			.attr("width", 740)
       			.style("stroke", bordercolor)
       			.style("fill", "none")
       			.style("stroke-width", border);


	svg.append('rect').style('fill', '#005fcc')
	    .attr("y", 20)
		.attr("x", 20)
        .attr('width', 15)
        .attr('height', 100)
        .attr("transform", function(d) {
        	movinText = svg.append("text")
			      .attr("y", 300)
			      .attr("x", 800)
			      .style("fill", "LightGrey")
			      .style("font-size", "17px")
			      .style("font-weight", "bold")
			      .text("Denver International Airport").style('opacity', 0);
        })
        .on('mouseover',function(d) {
		    d3.select(this).transition()
		            .style('opacity', 1)
		            .style('fill', "000066")
		            .attr('width',  300)
		            .attr('height',  160)
		    movinText.style('opacity', 0.9)
                    .transition()
                    .attr("y", 100)
                    .attr("x", 60)
                    .duration(500)
        })
        .on('mouseout',function(d) {
		    d3.select(this).transition()
		            .style('opacity', 1)
		            .style('fill', "#005fcc")
		            .attr('width',  20)
		            .attr('height',  100)
		    movinText
                    .transition()
                    .attr("y", 300)
                    .attr("x", 800)
                    .style('opacity', 0)
                    .duration(500)
        })
        
        

})();
</script>
</div>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

<span class="kd">var</span> <span class="nx">svg</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">"#trans"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">"svg"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'width'</span><span class="p">,</span><span class="mi">700</span><span class="p">)</span>
	<span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'height'</span><span class="p">,</span><span class="mi">300</span><span class="p">);</span>

	<span class="nx">svg</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'rect'</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s1">'fill'</span><span class="p">,</span> <span class="s1">'#005fcc'</span><span class="p">)</span>
	    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"y"</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
		<span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"x"</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'width'</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'height'</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"transform"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        	<span class="nx">movinText</span> <span class="o">=</span> <span class="nx">svg</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">"text"</span><span class="p">)</span>
			      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"y"</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
			      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"x"</span><span class="p">,</span> <span class="mi">800</span><span class="p">)</span>
			      <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">"fill"</span><span class="p">,</span> <span class="s2">"LightGrey"</span><span class="p">)</span>
			      <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">"font-size"</span><span class="p">,</span> <span class="s2">"17px"</span><span class="p">)</span>
			      <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">"font-weight"</span><span class="p">,</span> <span class="s2">"bold"</span><span class="p">)</span>
			      <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">"Denver International Airport"</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s1">'opacity'</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">})</span>
        <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'mouseover'</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
		    <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">transition</span><span class="p">()</span>
		            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s1">'opacity'</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s1">'fill'</span><span class="p">,</span> <span class="s2">"000066"</span><span class="p">)</span>
		            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'width'</span><span class="p">,</span>  <span class="mi">300</span><span class="p">)</span>
		            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'height'</span><span class="p">,</span>  <span class="mi">160</span><span class="p">)</span>
		    <span class="nx">movinText</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s1">'opacity'</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
                    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"y"</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"x"</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
        <span class="p">})</span>
        <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'mouseout'</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
		    <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">transition</span><span class="p">()</span>
		            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s1">'opacity'</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s1">'fill'</span><span class="p">,</span> <span class="s2">"#005fcc"</span><span class="p">)</span>
		            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'width'</span><span class="p">,</span>  <span class="mi">20</span><span class="p">)</span>
		            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'height'</span><span class="p">,</span>  <span class="mi">100</span><span class="p">)</span>
		    <span class="nx">movinText</span>
                    <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
                    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"y"</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"x"</span><span class="p">,</span> <span class="mi">800</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s1">'opacity'</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
        <span class="p">})</span>
        
        

<span class="p">})();</span></code></pre></figure>

<div class="divider"></div>

<p>Putting things together would result in the visualization shown <a href="http://www.santhoshfiddle.com/geoSample/index.html">here!</a></p>

<p>I hope this is helpfull in building an interactive map based visualization, I posted another blogpost on bubble plot on maps where the Year Clock is implemented.</p>
 ]]></content>
</entry>


  <entry>
  <title type="text">Bubble plots for Salary outcomes of US College Majors</title>
  <link rel="alternate" type="text/html" href="http://santhosh114.github.io//collegemajors.html" />
  <id>http://santhosh114.github.io//collegemajors</id>
  <published>2015-10-25T00:00:00Z</published>
  <updated>2015-10-25T00:00:00Z</updated>
  <content type="html"><![CDATA[ <iframe width="804" height="470" frameborder="0" scrolling="no" src="https://plot.ly/~sandyorbit/2.embed"></iframe>

<h3 id="overview"><a href="">Overview:</a></h3>

<p>This is an exploratory analysis of salary outcomes across various majors in the US.
Also it would attempt to give the viewer a quick view of how various college majors are placed in the job market relatively. This features mean salaries and respective 25th and 75th percentile salary plotted to give a comprehensive outlook towards the salary distributiion itself in the following posts.</p>

<p><a href="../research/project_college_majors.html">View this project research report. </a></p>

<h3 id="dataset"><a href="">Dataset:</a></h3>
<p>Although this data is smaller in size, it is a high dimentional sample with 17 features that makes it interesting for us to work with.
Our dataset is sourced from census.org of college majors 2012-13 from <a href="https://github.com/fivethirtyeight/data/tree/master/college-majors">fivethirtyeight</a></p>

<h3 id="visualization-technique"><a href="">Visualization Technique:</a></h3>

<p>We have used the Bubble plot to visualize the magnitude of the student sample in terms of area of the bubble, the y-axis is the median salary of college majors, the x-axis is the total number of employed students in the respective majors. Bubbles are color coded besed on the type of major.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c"># Bubble plot of Median salary Vs number of students employed. </span>

<span class="c"># We used four variables to give a comprehensive view of the college majors salary outcomes</span>
<span class="c"># and those are:  1)Median salary in X-axis</span>
<span class="c">#                 2)Employed # of students</span>
<span class="c">#                 3)Color code for each major based on the major code</span>
<span class="c">#                 4)Bubble area for the total number of students graduated. </span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="kn">as</span> <span class="nn">py</span>         
<span class="c"># plot.ly is the api that we used to get the color smoothening and spacial spread</span>
<span class="kn">import</span> <span class="nn">urllib2</span>                     
<span class="c"># (*) urllib2 for in-session downloads</span>
<span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>

<span class="c"># Import data file from URL into pd datafram in session</span>
<span class="n">salary_data_url</span> <span class="o">=</span> <span class="s">'https://raw.githubusercontent.com/fivethirtyeight/data/master/college-majors/all-ages.csv'</span>
<span class="n">data_file</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">salary_data_url</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data_file</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

<span class="n">unemp_data_url</span> <span class="o">=</span> <span class="s">'https://raw.githubusercontent.com/fivethirtyeight/data/master/college-majors/recent-grads.csv'</span>
<span class="n">data_file2</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">unemp_data_url</span><span class="p">)</span>
<span class="n">unemp_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data_file2</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

<span class="n">salary_bubble</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>          
<span class="c"># set new figure object to pass it to the plot.ly api </span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">salary_bubble</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>  


<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'Number of Employed Students'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'Median salary'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="mi">25000</span><span class="p">,</span> <span class="mi">110000</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">([</span><span class="o">-</span><span class="mi">100000</span><span class="p">,</span> <span class="mi">2100000</span><span class="p">])</span>

<span class="n">scatter</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
    <span class="n">df</span><span class="p">[</span><span class="s">'Employed_full_time_year_round'</span><span class="p">],</span>
    <span class="n">df</span><span class="p">[</span><span class="s">'Median'</span><span class="p">],</span>
    <span class="n">c</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s">'Major_code'</span><span class="p">],</span>                <span class="c"># using majorcode as our color scale</span>
    <span class="n">s</span><span class="o">=</span><span class="mi">4</span><span class="o">*</span><span class="n">sqrt</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">'Total'</span><span class="p">]),</span>             <span class="c"># taking square root to set the area for the bubbles  </span>
    <span class="n">linewidths</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">edgecolor</span><span class="o">=</span><span class="s">'w'</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">i_X</span><span class="p">,</span> <span class="n">X</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
        <span class="n">X</span><span class="p">[</span><span class="s">'Employed_full_time_year_round'</span><span class="p">],</span>
        <span class="n">X</span><span class="p">[</span><span class="s">'Median'</span><span class="p">],</span>
        <span class="n">X</span><span class="p">[</span><span class="s">'Major'</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">15</span><span class="p">],</span>              <span class="c"># only the first 15 letters</span>
        <span class="n">size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">horizontalalignment</span><span class="o">=</span><span class="s">'center'</span>
    <span class="p">)</span></code></pre></figure>

<p><img src="../static/img/blog/college/1.png" border="5" alt="Responsive image" /></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cufflinks</span> <span class="kn">as</span> <span class="nn">cf</span>             
<span class="c">#importing cufflinks api to set the zooming for the plot</span>
<span class="n">cf</span><span class="o">.</span><span class="n">set_config_file</span><span class="p">(</span><span class="n">offline</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">world_readable</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s">'pearl'</span><span class="p">)</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot_mpl</span><span class="p">(</span><span class="n">salary_bubble</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">'s6_bubble-chart'</span><span class="p">)</span> <span class="c">#passing the salary object to get the plot.ly style graph</span></code></pre></figure>

<p><img width="804" height="380" src="../static/img/blog/college/2.png" border="5" alt="Responsive image" /></p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">from</span> <span class="nx">pylab</span> <span class="kr">import</span> <span class="o">*</span>
<span class="nx">from</span> <span class="nx">scipy</span> <span class="kr">import</span> <span class="o">*</span>
<span class="kr">import</span> <span class="nx">matplotlib</span><span class="p">.</span><span class="nx">pyplot</span> <span class="nx">as</span> <span class="nx">plt</span>
<span class="kr">import</span> <span class="nx">numpy</span> <span class="nx">as</span> <span class="nx">np</span>
<span class="kr">import</span> <span class="nx">pandas</span> <span class="nx">as</span> <span class="nx">pd</span>


<span class="nx">output_category</span><span class="o">=</span><span class="p">[]</span>                
<span class="err">#</span> <span class="nx">a</span> <span class="nx">list</span> <span class="nx">to</span> <span class="nx">store</span> <span class="nx">all</span> <span class="nx">the</span> <span class="nx">categories</span>  
<span class="k">for</span> <span class="nx">xcategory</span> <span class="k">in</span> <span class="nx">df</span><span class="p">[</span><span class="s1">'Major_category'</span><span class="p">]</span><span class="err">:</span>
    <span class="k">if</span> <span class="nx">xcategory</span> <span class="nx">not</span> <span class="k">in</span> <span class="nx">output_category</span><span class="err">:</span>
        <span class="nx">output_category</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">xcategory</span><span class="p">)</span>

<span class="nx">print</span> <span class="nx">len</span><span class="p">(</span><span class="nx">output_category</span><span class="p">)</span>        
<span class="err">#</span><span class="nx">check</span> <span class="nx">the</span> <span class="nx">length</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">list</span> <span class="nx">of</span> <span class="nx">categories</span> <span class="nx">to</span> <span class="nx">set</span> <span class="nx">colors</span> <span class="nx">based</span> <span class="nx">on</span> <span class="nx">its</span> <span class="nx">number</span>  

<span class="nx">colour</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"teal"</span><span class="p">,</span><span class="s2">"brown"</span><span class="p">,</span><span class="s2">"goldenrod"</span><span class="p">,</span> <span class="s2">"purple"</span><span class="p">,</span> <span class="s2">"orange"</span><span class="p">,</span>     
          <span class="s2">"mediumspringgreen"</span><span class="p">,</span> <span class="s2">"black"</span><span class="p">,</span><span class="s2">"cyan"</span><span class="p">,</span><span class="s2">"deeppink"</span><span class="p">,</span> 
          <span class="s2">"yellow"</span><span class="p">,</span><span class="s2">"pink"</span><span class="p">,</span> <span class="s2">"gold"</span><span class="p">,</span><span class="s2">"olive"</span><span class="p">,</span><span class="s2">"orchid"</span><span class="p">,</span><span class="s2">"tomato"</span><span class="p">,</span><span class="s2">"dodgerblue"</span><span class="p">,</span><span class="s2">"darkorange"</span> <span class="p">]</span>
<span class="err">#</span> <span class="nx">setting</span> <span class="nx">colors</span> <span class="nx">manually</span> <span class="nx">and</span> <span class="nx">I</span> <span class="nx">chose</span> <span class="nx">minimal</span> <span class="nx">color</span> <span class="nx">palette</span> 


<span class="nx">cat</span> <span class="o">=</span> <span class="p">[]</span>
<span class="nx">area</span><span class="o">=</span><span class="p">[]</span>
<span class="nx">category_employed</span> <span class="o">=</span> <span class="p">[]</span>
<span class="nx">category_median</span> <span class="o">=</span> <span class="p">[]</span>
<span class="nx">small_fig_bubble</span> <span class="o">=</span> <span class="nx">plt</span><span class="p">.</span><span class="nx">figure</span><span class="p">()</span>

<span class="err">#</span><span class="s1">'for'</span> <span class="nx">loop</span> <span class="nx">to</span> <span class="nx">set</span> <span class="nx">the</span> <span class="nx">values</span> <span class="nx">of</span> <span class="nx">those</span> <span class="mi">16</span> <span class="nx">majors</span> <span class="nx">by</span> <span class="nx">taking</span> <span class="nx">the</span> <span class="nx">mean</span> <span class="nx">salaries</span><span class="p">,</span><span class="nx">totals</span> <span class="nx">etc</span>
<span class="k">for</span> <span class="nx">category</span> <span class="k">in</span> <span class="nx">output_category</span><span class="err">:</span>       
    <span class="nx">cat</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">category</span><span class="p">)</span>
    <span class="nx">category_employed</span><span class="p">.</span><span class="nx">append</span><span class="p">((</span><span class="nx">np</span><span class="p">.</span><span class="nx">mean</span><span class="p">(</span><span class="nx">df</span><span class="p">[</span><span class="nx">df</span><span class="p">[</span><span class="s1">'Major_category'</span><span class="p">]</span> <span class="o">==</span> <span class="nx">category</span><span class="p">].</span><span class="nx">Employed</span><span class="p">)))</span>
    <span class="nx">category_median</span><span class="p">.</span><span class="nx">append</span><span class="p">((</span><span class="nx">np</span><span class="p">.</span><span class="nx">mean</span><span class="p">(</span><span class="nx">df</span><span class="p">[</span><span class="nx">df</span><span class="p">[</span><span class="s1">'Major_category'</span><span class="p">]</span> <span class="o">==</span> <span class="nx">category</span><span class="p">].</span><span class="nx">Median</span><span class="p">)))</span>
    <span class="nx">area</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="mi">6</span><span class="o">*</span><span class="nx">sqrt</span><span class="p">((</span><span class="nx">np</span><span class="p">.</span><span class="nx">mean</span><span class="p">(</span><span class="nx">df</span><span class="p">[</span><span class="nx">df</span><span class="p">[</span><span class="s1">'Major_category'</span><span class="p">]</span> <span class="o">==</span> <span class="nx">category</span><span class="p">].</span><span class="nx">Total</span><span class="p">))))</span>  <span class="err">#</span><span class="nx">the</span> <span class="nx">area</span> <span class="nx">is</span> <span class="nx">magnified</span> <span class="nx">by</span> <span class="mi">6</span> <span class="nx">times</span> <span class="nx">to</span> <span class="nx">show</span> <span class="nx">a</span> <span class="nx">real</span> <span class="nx">sense</span> <span class="nx">of</span> <span class="nx">area</span><span class="p">.</span>

<span class="k">for</span> <span class="nx">vals</span> <span class="k">in</span> <span class="nx">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span><span class="err">:</span>
    <span class="nx">text</span><span class="p">(</span><span class="nx">category_employed</span><span class="p">[</span><span class="nx">vals</span><span class="p">],</span> <span class="nx">category_median</span><span class="p">[</span><span class="nx">vals</span><span class="p">],</span> <span class="nx">cat</span><span class="p">[</span><span class="nx">vals</span><span class="p">],</span> <span class="nx">size</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>  <span class="err">#</span><span class="nx">infusing</span> <span class="nx">the</span> <span class="nx">lables</span> <span class="nx">into</span> <span class="nx">the</span> <span class="mi">16</span> <span class="nx">categories</span>

    
<span class="nx">scatter</span><span class="p">(</span><span class="nx">category_employed</span><span class="p">,</span><span class="nx">category_median</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">colour</span><span class="p">,</span><span class="nx">s</span><span class="o">=</span><span class="nx">area</span><span class="p">,</span><span class="nx">linewidths</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="nx">edgecolor</span><span class="o">=</span><span class="s1">'w'</span><span class="p">,</span><span class="nx">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>
<span class="nx">plt</span><span class="p">.</span><span class="nx">xlabel</span><span class="p">(</span><span class="s1">'Number of Employed Students'</span><span class="p">)</span>
<span class="nx">plt</span><span class="p">.</span><span class="nx">ylabel</span><span class="p">(</span><span class="s1">'Median salary'</span><span class="p">)</span>
<span class="nx">plt</span><span class="p">.</span><span class="nx">ylim</span><span class="p">([</span><span class="mi">30000</span><span class="p">,</span> <span class="mi">80000</span><span class="p">])</span>
<span class="nx">plt</span><span class="p">.</span><span class="nx">xlim</span><span class="p">([</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">660000</span><span class="p">])</span>
<span class="nx">show</span><span class="p">()</span>                     <span class="err">#</span> <span class="nx">we</span> <span class="nx">get</span> <span class="nx">a</span> <span class="nx">clearer</span> <span class="nx">picture</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">story</span> <span class="nx">by</span> <span class="nx">categorizing</span> <span class="nx">the</span> <span class="nx">data</span> <span class="nx">points</span></code></pre></figure>

<p><img src="../static/img/blog/college/3.png" border="5" alt="Responsive image" /></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cufflinks</span> <span class="kn">as</span> <span class="nn">cf</span>
<span class="n">cf</span><span class="o">.</span><span class="n">set_config_file</span><span class="p">(</span><span class="n">offline</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">world_readable</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s">'pearl'</span><span class="p">)</span>
<span class="n">py</span><span class="o">.</span><span class="n">iplot_mpl</span><span class="p">(</span><span class="n">small_fig_bubble</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">'s6_bubble-chart'</span><span class="p">)</span>       
<span class="c"># again we want to use plot.ly to give a pritty image of the above visualization</span>
<span class="c"># but this time around the colors have been chosen and set by us! </span></code></pre></figure>

<iframe width="804" height="470" frameborder="0" scrolling="no" src="https://plot.ly/~sandyorbit/2.embed"></iframe>

 ]]></content>
</entry>


  <entry>
  <title type="text">Diceyness of Visual Perception</title>
  <link rel="alternate" type="text/html" href="http://santhosh114.github.io//steve.html" />
  <id>http://santhosh114.github.io//steve</id>
  <published>2015-10-08T00:00:00Z</published>
  <updated>2015-10-08T00:00:00Z</updated>
  <content type="html"><![CDATA[ <style>.container {
  width: auto;
  max-width: 800px;
  text-align: center;

}
</style>

<p><img src="../static/img/blog/steve/main.png" alt="Test Image" style="width:680px;height:450px;" /></p>

<blockquote>
  <p>This is an extract from I590: Data Visualization course discussions at <a href="https://www.indiana.edu">Indiana University, Bloomington</a>, Instructor: <a href="http://yongyeol.com">Yong Yeol Ahn</a>.</p>
</blockquote>

<h3 id="overview"><a href="">Overview:</a></h3>
<p>Information Visualization is a marriage of multiple disciplines such as Psychology, Human Computer Interaction and Data Science, which again includes Computer Science, and Statistics! So they’re many reasons to be intrigued by its sheer depth and this post quickly gives a glimpse of Psychological aspect of Information Visualization.</p>

<p>In terms of our visual apparatus, we’re not as good at judging differences in certain parameters and NOT good at some and Stevens’ Power Law gives us a quick way to measure this phenomenon.</p>

<h3 id="stevens-power-law"><a href="">Stevens’ Power Law:</a></h3>
<p>The general form of the law is</p>

<script type="math/tex; mode=display">\psi(I) = kI^a,</script>

<p>where \( I \) is the magnitude of the physical stimulus, \( \psi(I) \) is the subjective magnitude of the sensation evoked by the stimulus, \( a \) is an exponent that depends on the type of stimulation and \( k \) is a proportionality constant that depends on the units used.</p>
<div class="divider"></div>

<p><img src="../static/img/blog/steve/steve.png" alt="Test Image" style="width:438px;height:450px;" /></p>
<p><a href="http://d.hatena.ne.jp/keiono/20110324/1301049705">Image Source</a></p>

<p>Charting this out gives us an interesting array of stimulus and from the below image one can generalize the stimulus exaggeration that happens with the responses below the line (Length n=1.0) namely area, loudness and brightness. This means the change in these parameters (area, loudness and brightness) is in some way underestimated by the human perception and the reverse is true for the upper side of the line. This is why we give careful consideration while designing an infographic with colors and their brightness. <a href="http://www.santhoshfiddle.com/post3.html">My case-study on choropleth maps</a></p>

<h3 id="example-length-vs-area"><a href="">Example: Length vs Area</a></h3>
<p>From Stevens’ Power Law we can immediately conclude that we’re not as good at judging differences area as we are in length. We use length as a means to judge sizes and therefore tend to underestimate differences in areas especially of the circles.</p>
<p><img src="../static/img/blog/steve/comp.png" alt="Test Image" style="width:640px;height:266px;" /></p>

<p>For this reason, a circle that actually has 3x the area of another appears comparable because our brain is relating their radii, which differ by a factor of 1.72x.</p>

<p><img src="../static/img/blog/steve/circle.png" alt="Test Image" style="width:600px;height:350px;" /></p>
<p>The above comparison is from <a href="http://vis.stanford.edu/files/2010-MTurk-CHI.pdf">Crowdsourcing Graphical Perception: Using Mechanical Turk to Assess Visualization Design</a> by Jeffrey Heer and Michael Bostock.</p>

<div class="divider"></div>

<p>And an interesting ordering of these visual elements for general use is listed <a href="http://hci.stanford.edu/courses/cs448b/w09/lectures/20090126-Perception.pdf">here</a> by Jeffrey Heer @Stanford HCI Group lectures.</p>
<p><img src="../static/img/blog/steve/heer.png" alt="Test Image" style="width:700px;height:490px;" /></p>

<div class="divider"></div>

<h3 id="pie"><a href="">Pie:</a></h3>
<p>This is one reason why one of the most overused pie charts are getting dicey at a point where you wants to really visualize information in a precise way.</p>

<p><img src="../static/img/blog/steve/pie.png" alt="Test Image" style="width:500px;height:480px;" /></p>

 ]]></content>
</entry>


  <entry>
  <title type="text">My Critique on Precinct-Level Choropleth Map</title>
  <link rel="alternate" type="text/html" href="http://santhosh114.github.io//critique.html" />
  <id>http://santhosh114.github.io//critique</id>
  <published>2015-09-05T00:00:00Z</published>
  <updated>2015-09-05T00:00:00Z</updated>
  <content type="html"><![CDATA[ <style>.container {
  width: auto;
  max-width: 800px;
  text-align: center;

}
</style>

<p><img src="../static/img/blog/critique/main.png" alt="Test Image" style="width:704px;height:427px;" /></p>

<blockquote>
  <p>This is my critique on the article titled <a href="http://www.nytimes.com/interactive/2014/11/04/upshot/senate-maps.html?_r=0">“The Most Detailed Maps You’ll See From the Midterm Elections”</a>
 @nytimes/upshot</p>
</blockquote>

<div class="divider"></div>

<h3 id="infograph-overview"><a href="">Infograph Overview:</a></h3>

<p>This visualization is a precinct-level choropleth map of election results from the midterm elections. The objective of the visualization is to show a fine-grained analysis of how the Republicans and Democrats are spread along with the population density, measured by the graduated color scale.</p>

<p>A precinct is one of the part into which a town or city is divided in order to organize elections, as reported by the article- “there were more than 175,000 precincts in the United States in 2012, fifty times the number of counties”.</p>

<p>So this demonstrates the sheer efficacy of the precinct-level data and how effectively one can draw insights when the data is much finer. Now the county level analysis of polling results gives a clearer picture of how the data spread within the county. Hence, this visualization for me appears to have the potential to convey actionable insights.</p>

<div class="divider"></div>

<h3 id="visualization-technique"><a href="">Visualization Technique:</a></h3>

<p>This is a geo-location based map visualization technique called choropleth map and it uses a coloring scheme inside defined areas on a map in order to show value levels and indicate the average values of some property or quantity in those areas.</p>

<div class="divider"></div>

<h3 id="how-it-works"><a href="">How it works:</a></h3>

<p>The basic design is to represent Democratic in blue and Republican in red with various hue levels based on the population density within the precincts. Much needed zoom functionality is provided with dynamic county-level labeling in the first layer and precinct-level labeling in the further zoom levels.</p>

<ul>
  <li>Key insights described as a result of detected patterns at different areas/regions.</li>
  <li>Overall percentage split-up shown state wide per candidate.</li>
  <li>Compare and contrasts population based on its metadata like candidate origin, racial attributes etc.</li>
  <li>Population density as hue variation augmented with party specific colors.</li>
  <li>MouseOver shows the candidate information and total number of votes.</li>
  <li>Minimal design with the insights described in the form of plain text.</li>
  <li>Every visualization technique has it own pros and cons in terms of how well it depicts the data. This is an excellent example of geo-data-visualization with optimal usage of design, color and area breakdown. The following are the few points summarizing this.</li>
</ul>

<div class="divider"></div>

<h3 id="design-mileage"><a href="">Design Mileage:</a></h3>

<p>The precinct-level data clearly adds a lot of detail and outlines distinct clusters.
Helpful for finding intriguing relationships between two or more geographic location based on the nature of the population.
Give an idea of how each area compares with other in terms of number and spread of votes.</p>

<div class="divider"></div>

<h3 id="data-sources"><a href="">Data Sources:</a></h3>

<p>State wise polling data is sourced from the corresponding state’s Board of Elections, therefore the probe for data integrity will be simply out of question, at least from where I stand. 
Streets data by OpenStreetMap contributers.</p>

 ]]></content>
</entry>


  <entry>
  <title type="text">Interactive Choropleth Map - US</title>
  <link rel="alternate" type="text/html" href="http://santhosh114.github.io//chloro.html" />
  <id>http://santhosh114.github.io//chloro</id>
  <published>2015-08-11T00:00:00Z</published>
  <updated>2015-08-11T00:00:00Z</updated>
  <content type="html"><![CDATA[ <style>
  .state{
    fill: none;
    stroke: #99cd0d;
    stroke-width: 1;
  }
  .state:hover{
    fill-opacity:0.5;
  }
  #tooltip {   
    position: absolute;           
    text-align: center;
    padding: 20px;             
    margin: 10px;
    font: 12px sans-serif;        
    background: lightsteelblue;   
    border: 1px;      
    border-radius: 2px;           
    pointer-events: none;         
  }
  #tooltip h4{
    margin:0;
    font-size:14px;
  }
  #tooltip{
    background:rgba(0,0,0,0.9);
    border:1px solid grey;
    border-radius:5px;
    font-size:12px;
    width:auto;
    padding:4px;
    color:white;
    opacity:0;
  }
  #tooltip table{
    table-layout:fixed;
  }
  #tooltip tr td{
    padding:0;
    margin:0;
  }
  #tooltip tr td:nth-child(1){
    width:50px;
  }
  #tooltip tr td:nth-child(2){
    text-align:center;
  }

</style>

<style>.container {
  width: auto;
  max-width: 1060px;
  text-align: center;

}
</style>

<div id="tooltip"></div>
<!-- div to hold tooltip. -->
<div class="myNote">
<svg width="1000" height="650" id="statesvg"></svg> <!-- svg to hold the map. -->
<script src="../static/js/uStates.js"></script> <!-- creates uStates. -->
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

  function tooltipHtml(n, d){ /* function to create html content string in tooltip div. */
    return "<h4>"+n+"</h4><table>"+
      "<tr><td>Low</td><td>"+(d.low)+"</td></tr>"+
      "<tr><td>Average</td><td>"+(d.avg)+"</td></tr>"+
      "<tr><td>High</td><td>"+(d.high)+"</td></tr>"+
      "</table>";
  }
  
  var sampleData ={}; /* Sample random data. */ 
  ["HI", "AK", "FL", "SC", "GA", "AL", "NC", "TN", "RI", "CT", "MA",
  "ME", "NH", "VT", "NY", "NJ", "PA", "DE", "MD", "WV", "KY", "OH", 
  "MI", "WY", "MT", "ID", "WA", "DC", "TX", "CA", "AZ", "NV", "UT", 
  "CO", "NM", "OR", "ND", "SD", "NE", "IA", "MS", "IN", "IL", "MN", 
  "WI", "MO", "AR", "OK", "KS", "LS", "VA"]
    .forEach(function(d){ 
      var low=Math.round(100*Math.random()), 
        mid=Math.round(100*Math.random()), 
        high=Math.round(100*Math.random());
      sampleData[d]={low:d3.min([low,mid,high]), high:d3.max([low,mid,high]), 
          avg:Math.round((low+mid+high)/3), color:d3.interpolate("#e9ff6f", "#037b7f")(low/100)}; 
    });
  
  /* draw states on id #statesvg */ 
  choropleth.draw("#statesvg", sampleData, tooltipHtml);
</script>
</div>

<div class="divider"></div>

<h3 id="infographic-overview"><a href="">Infographic Overview:</a></h3>

<p>This is a Choropleth map of US based on Math.random data(you would notice the data changing for every page refresh) is a thematic map in which areas are shaded or patterned in proportion to the measurement of the statistical variable being displayed on the map, such as population density or per-capita income.</p>

<p>It is interactive in nature by showing some simple stats!</p>

<h3 id="data"><a href="">Data:</a></h3>
<p>The primary data is applied over the area of the mapped regions by means of Color!</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Color interpolated between the variables(low, mid, high).</span>
<span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">){</span> 
      <span class="kd">var</span> <span class="nx">low</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()),</span> 
          <span class="nx">mid</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()),</span> 
          <span class="nx">high</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">());</span>
          <span class="nx">sampleData</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="na">low</span><span class="p">:</span><span class="nx">d3</span><span class="p">.</span><span class="nx">min</span><span class="p">([</span><span class="nx">low</span><span class="p">,</span><span class="nx">mid</span><span class="p">,</span><span class="nx">high</span><span class="p">]),</span> <span class="na">high</span><span class="p">:</span><span class="nx">d3</span><span class="p">.</span><span class="nx">max</span><span class="p">([</span><span class="nx">low</span><span class="p">,</span><span class="nx">mid</span><span class="p">,</span><span class="nx">high</span><span class="p">]),</span> 
          <span class="na">avg</span><span class="p">:</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">((</span><span class="nx">low</span><span class="o">+</span><span class="nx">mid</span><span class="o">+</span><span class="nx">high</span><span class="p">)</span><span class="o">/</span><span class="mi">3</span><span class="p">),</span> <span class="na">color</span><span class="p">:</span><span class="nx">d3</span><span class="p">.</span><span class="nx">interpolate</span><span class="p">(</span><span class="s2">"#e9ff6f"</span><span class="p">,</span> <span class="s2">"#037b7f"</span><span class="p">)(</span><span class="nx">low</span><span class="o">/</span><span class="mi">100</span><span class="p">)};</span> 
    <span class="p">}</span></code></pre></figure>

 ]]></content>
</entry>


  <entry>
  <title type="text">A simple Interactive Streamgraph</title>
  <link rel="alternate" type="text/html" href="http://santhosh114.github.io//stream.html" />
  <id>http://santhosh114.github.io//stream</id>
  <published>2015-07-13T00:00:00Z</published>
  <updated>2015-07-13T00:00:00Z</updated>
  <content type="html"><![CDATA[ <style>
 button {
  position: relative;
  left: 610px;
  top: 10px;
}

</style>

<script src="//d3js.org/d3.v3.min.js"></script>

<div id="Stream">
  <button onclick="transition()">Update Stream Graph</button>
</div>
<script>

var n = 20, // number of layers
    m = 200, // number of samples per layer
    stack = d3.layout.stack().offset("wiggle"),
    layers0 = stack(d3.range(n).map(function() { return bumpLayer(m); })),
    layers1 = stack(d3.range(n).map(function() { return bumpLayer(m); }));

var width = 800,
    height = 450;

var x = d3.scale.linear()
    .domain([0, m - 1])
    .range([0, width]);

var y = d3.scale.linear()
    .domain([0, d3.max(layers0.concat(layers1), function(layer) { return d3.max(layer, function(d) { return d.y0 + d.y; }); })])
    .range([height, 0]);

var color = d3.scale.linear()
    .range(["Green", "White"]);

  // var  color = d3.scale.category20();

var area = d3.svg.area()
    .x(function(d) { return x(d.x); })
    .y0(function(d) { return y(d.y0); })
    .y1(function(d) { return y(d.y0 + d.y); });

var svg = d3.select("#Stream").append("svg")
    .attr("width", width)
    .attr("height", height);

svg.selectAll("path")
    .data(layers0)
  .enter().append("path")
    .attr("d", area)
    .style("fill", function() { return color(Math.random()); });

function transition() {
  d3.selectAll("path")
      .data(function() {
        var d = layers1;
        layers1 = layers0;
        return layers0 = d;
      })
    .transition()
      .duration(2500)
      .attr("d", area);
}

// Inspired by Lee Byron's test data generator.
function bumpLayer(n) {

  function bump(a) {
    var x = 1 / (.1 + Math.random()),
        y = 2 * Math.random() - .5,
        z = 10 / (.1 + Math.random());
    for (var i = 0; i < n; i++) {
      var w = (i / n - y) * z;
      a[i] += x * Math.exp(-w * w);
    }
  }

  var a = [], i;
  for (i = 0; i < n; ++i) a[i] = 0;
  for (i = 0; i < 5; ++i) bump(a);
  return a.map(function(d, i) { return {x: i, y: Math.max(0, d)}; });
}

</script>

<div class="divider"> 

<!-- https://bl.ocks.org/mbostock/4060954 -->
</div>

<h3 id="data"><a href="">Data:</a></h3>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Inspired by Lee Byron's test data generator.</span>
<span class="kd">function</span> <span class="nx">bumpLayer</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>

  <span class="kd">function</span> <span class="nx">bump</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(.</span><span class="mi">1</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()),</span>
        <span class="nx">y</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">-</span> <span class="p">.</span><span class="mi">5</span><span class="p">,</span>
        <span class="nx">z</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">/</span> <span class="p">(.</span><span class="mi">1</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">());</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">w</span> <span class="o">=</span> <span class="p">(</span><span class="nx">i</span> <span class="o">/</span> <span class="nx">n</span> <span class="o">-</span> <span class="nx">y</span><span class="p">)</span> <span class="o">*</span> <span class="nx">z</span><span class="p">;</span>
      <span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">x</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">exp</span><span class="p">(</span><span class="o">-</span><span class="nx">w</span> <span class="o">*</span> <span class="nx">w</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">i</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="nx">bump</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">{</span><span class="na">x</span><span class="p">:</span> <span class="nx">i</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">d</span><span class="p">)};</span> <span class="p">});</span>
<span class="p">}</span></code></pre></figure>

 ]]></content>
</entry>


  <entry>
  <title type="text">Simple Force Layout</title>
  <link rel="alternate" type="text/html" href="http://santhosh114.github.io//cluster.html" />
  <id>http://santhosh114.github.io//cluster</id>
  <published>2015-05-13T00:00:00Z</published>
  <updated>2015-05-13T00:00:00Z</updated>
  <content type="html"><![CDATA[ <style>
.link {
  stroke: #ccc;
}

.node text {
  pointer-events: none;
  font: 10px sans-serif;
}
</style>

<div id="forceLay"></div>

<blockquote>
  <p>Thanks to <a href="http://www.coppelia.io/2014/07/an-a-to-z-of-extra-features-for-the-d3-force-layout/">SIMON RAPER</a>, for providing data and a niche tutorial to make such a force layout.</p>
</blockquote>

<h3 id="overview"><a href="">Overview:</a></h3>

<p>This is a simple force layout designed on a custom made graph data set. It can be used with various features like Search, Pinning down nodes etc.</p>

<h3 id="data"><a href="">Data:</a></h3>
<p>This is a connected data with a cluster formation among node based on the Group attribute in the data.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// sample of data used for the nodes in the form of a json type variable. </span>
<span class="s2">"nodes"</span><span class="err">:</span> <span class="p">[{</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Myriel"</span><span class="p">,</span>
                <span class="s2">"group"</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Napoleon"</span><span class="p">,</span>
                <span class="s2">"group"</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Mlle.Baptistine"</span><span class="p">,</span>
                <span class="s2">"group"</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">},{</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Isabeau"</span><span class="p">,</span>
                <span class="s2">"group"</span><span class="p">:</span> <span class="mi">2</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Gervais"</span><span class="p">,</span>
                <span class="s2">"group"</span><span class="p">:</span> <span class="mi">2</span>
        <span class="p">}]</span></code></pre></figure>

<script type="application/json" id="mis">
    {
        "nodes": [{
            "name": "Myriel",
                "group": 1
        }, {
            "name": "Napoleon",
                "group": 1
        }, {
            "name": "Mlle.Baptistine",
                "group": 1
        }, {
            "name": "Mme.Magloire",
                "group": 1
        }, {
            "name": "CountessdeLo",
                "group": 1
        }, {
            "name": "Geborand",
                "group": 1
        }, {
            "name": "Champtercier",
                "group": 1
        }, {
            "name": "Cravatte",
                "group": 1
        }, {
            "name": "Count",
                "group": 1
        }, {
            "name": "OldMan",
                "group": 1
        }, {
            "name": "Labarre",
                "group": 2
        }, {
            "name": "Valjean",
                "group": 2
        }, {
            "name": "Marguerite",
                "group": 3
        }, {
            "name": "Mme.deR",
                "group": 2
        }, {
            "name": "Isabeau",
                "group": 2
        }, {
            "name": "Gervais",
                "group": 2
        }, {
            "name": "Tholomyes",
                "group": 3
        }, {
            "name": "Listolier",
                "group": 3
        }, {
            "name": "Fameuil",
                "group": 3
        }, {
            "name": "Blacheville",
                "group": 3
        }, {
            "name": "Favourite",
                "group": 3
        }, {
            "name": "Dahlia",
                "group": 3
        }, {
            "name": "Zephine",
                "group": 3
        }, {
            "name": "Fantine",
                "group": 3
        }, {
            "name": "Mme.Thenardier",
                "group": 4
        }, {
            "name": "Thenardier",
                "group": 4
        }, {
            "name": "Cosette",
                "group": 5
        }, {
            "name": "Javert",
                "group": 4
        }, {
            "name": "Fauchelevent",
                "group": 0
        }, {
            "name": "Bamatabois",
                "group": 2
        }, {
            "name": "Perpetue",
                "group": 3
        }, {
            "name": "Simplice",
                "group": 2
        }, {
            "name": "Scaufflaire",
                "group": 2
        }, {
            "name": "Woman1",
                "group": 2
        }, {
            "name": "Judge",
                "group": 2
        }, {
            "name": "Champmathieu",
                "group": 2
        }, {
            "name": "Brevet",
                "group": 2
        }, {
            "name": "Chenildieu",
                "group": 2
        }, {
            "name": "Cochepaille",
                "group": 2
        }, {
            "name": "Pontmercy",
                "group": 4
        }, {
            "name": "Boulatruelle",
                "group": 6
        }, {
            "name": "Eponine",
                "group": 4
        }, {
            "name": "Anzelma",
                "group": 4
        }, {
            "name": "Woman2",
                "group": 5
        }, {
            "name": "MotherInnocent",
                "group": 0
        }, {
            "name": "Gribier",
                "group": 0
        }, {
            "name": "Jondrette",
                "group": 7
        }, {
            "name": "Mme.Burgon",
                "group": 7
        }, {
            "name": "Gavroche",
                "group": 8
        }, {
            "name": "Gillenormand",
                "group": 5
        }, {
            "name": "Magnon",
                "group": 5
        }, {
            "name": "Mlle.Gillenormand",
                "group": 5
        }, {
            "name": "Mme.Pontmercy",
                "group": 5
        }, {
            "name": "Mlle.Vaubois",
                "group": 5
        }, {
            "name": "Lt.Gillenormand",
                "group": 5
        }, {
            "name": "Marius",
                "group": 8
        }, {
            "name": "BaronessT",
                "group": 5
        }, {
            "name": "Mabeuf",
                "group": 8
        }, {
            "name": "Enjolras",
                "group": 8
        }, {
            "name": "Combeferre",
                "group": 8
        }, {
            "name": "Prouvaire",
                "group": 8
        }, {
            "name": "Feuilly",
                "group": 8
        }, {
            "name": "Courfeyrac",
                "group": 8
        }, {
            "name": "Bahorel",
                "group": 8
        }, {
            "name": "Bossuet",
                "group": 8
        }, {
            "name": "Joly",
                "group": 8
        }, {
            "name": "Grantaire",
                "group": 8
        }, {
            "name": "MotherPlutarch",
                "group": 9
        }, {
            "name": "Gueulemer",
                "group": 4
        }, {
            "name": "Babet",
                "group": 4
        }, {
            "name": "Claquesous",
                "group": 4
        }, {
            "name": "Montparnasse",
                "group": 4
        }, {
            "name": "Toussaint",
                "group": 5
        }, {
            "name": "Child1",
                "group": 10
        }, {
            "name": "Child2",
                "group": 10
        }, {
            "name": "Brujon",
                "group": 4
        }, {
            "name": "Mme.Hucheloup",
                "group": 8
        }],
            "links": [{
            "source": 1,
                "target": 0,
                "value": 1
        }, {
            "source": 2,
                "target": 0,
                "value": 8
        }, {
            "source": 3,
                "target": 0,
                "value": 10
        }, {
            "source": 3,
                "target": 2,
                "value": 6
        }, {
            "source": 4,
                "target": 0,
                "value": 1
        }, {
            "source": 5,
                "target": 0,
                "value": 1
        }, {
            "source": 6,
                "target": 0,
                "value": 1
        }, {
            "source": 7,
                "target": 0,
                "value": 1
        }, {
            "source": 8,
                "target": 0,
                "value": 2
        }, {
            "source": 9,
                "target": 0,
                "value": 1
        }, {
            "source": 11,
                "target": 10,
                "value": 1
        }, {
            "source": 11,
                "target": 3,
                "value": 3
        }, {
            "source": 11,
                "target": 2,
                "value": 3
        }, {
            "source": 11,
                "target": 0,
                "value": 5
        }, {
            "source": 12,
                "target": 11,
                "value": 1
        }, {
            "source": 13,
                "target": 11,
                "value": 1
        }, {
            "source": 14,
                "target": 11,
                "value": 1
        }, {
            "source": 15,
                "target": 11,
                "value": 1
        }, {
            "source": 17,
                "target": 16,
                "value": 4
        }, {
            "source": 18,
                "target": 16,
                "value": 4
        }, {
            "source": 18,
                "target": 17,
                "value": 4
        }, {
            "source": 19,
                "target": 16,
                "value": 4
        }, {
            "source": 19,
                "target": 17,
                "value": 4
        }, {
            "source": 19,
                "target": 18,
                "value": 4
        }, {
            "source": 20,
                "target": 16,
                "value": 3
        }, {
            "source": 20,
                "target": 17,
                "value": 3
        }, {
            "source": 20,
                "target": 18,
                "value": 3
        }, {
            "source": 20,
                "target": 19,
                "value": 4
        }, {
            "source": 21,
                "target": 16,
                "value": 3
        }, {
            "source": 21,
                "target": 17,
                "value": 3
        }, {
            "source": 21,
                "target": 18,
                "value": 3
        }, {
            "source": 21,
                "target": 19,
                "value": 3
        }, {
            "source": 21,
                "target": 20,
                "value": 5
        }, {
            "source": 22,
                "target": 16,
                "value": 3
        }, {
            "source": 22,
                "target": 17,
                "value": 3
        }, {
            "source": 22,
                "target": 18,
                "value": 3
        }, {
            "source": 22,
                "target": 19,
                "value": 3
        }, {
            "source": 22,
                "target": 20,
                "value": 4
        }, {
            "source": 22,
                "target": 21,
                "value": 4
        }, {
            "source": 23,
                "target": 16,
                "value": 3
        }, {
            "source": 23,
                "target": 17,
                "value": 3
        }, {
            "source": 23,
                "target": 18,
                "value": 3
        }, {
            "source": 23,
                "target": 19,
                "value": 3
        }, {
            "source": 23,
                "target": 20,
                "value": 4
        }, {
            "source": 23,
                "target": 21,
                "value": 4
        }, {
            "source": 23,
                "target": 22,
                "value": 4
        }, {
            "source": 23,
                "target": 12,
                "value": 2
        }, {
            "source": 23,
                "target": 11,
                "value": 9
        }, {
            "source": 24,
                "target": 23,
                "value": 2
        }, {
            "source": 24,
                "target": 11,
                "value": 7
        }, {
            "source": 25,
                "target": 24,
                "value": 13
        }, {
            "source": 25,
                "target": 23,
                "value": 1
        }, {
            "source": 25,
                "target": 11,
                "value": 12
        }, {
            "source": 26,
                "target": 24,
                "value": 4
        }, {
            "source": 26,
                "target": 11,
                "value": 31
        }, {
            "source": 26,
                "target": 16,
                "value": 1
        }, {
            "source": 26,
                "target": 25,
                "value": 1
        }, {
            "source": 27,
                "target": 11,
                "value": 17
        }, {
            "source": 27,
                "target": 23,
                "value": 5
        }, {
            "source": 27,
                "target": 25,
                "value": 5
        }, {
            "source": 27,
                "target": 24,
                "value": 1
        }, {
            "source": 27,
                "target": 26,
                "value": 1
        }, {
            "source": 28,
                "target": 11,
                "value": 8
        }, {
            "source": 28,
                "target": 27,
                "value": 1
        }, {
            "source": 29,
                "target": 23,
                "value": 1
        }, {
            "source": 29,
                "target": 27,
                "value": 1
        }, {
            "source": 29,
                "target": 11,
                "value": 2
        }, {
            "source": 30,
                "target": 23,
                "value": 1
        }, {
            "source": 31,
                "target": 30,
                "value": 2
        }, {
            "source": 31,
                "target": 11,
                "value": 3
        }, {
            "source": 31,
                "target": 23,
                "value": 2
        }, {
            "source": 31,
                "target": 27,
                "value": 1
        }, {
            "source": 32,
                "target": 11,
                "value": 1
        }, {
            "source": 33,
                "target": 11,
                "value": 2
        }, {
            "source": 33,
                "target": 27,
                "value": 1
        }, {
            "source": 34,
                "target": 11,
                "value": 3
        }, {
            "source": 34,
                "target": 29,
                "value": 2
        }, {
            "source": 35,
                "target": 11,
                "value": 3
        }, {
            "source": 35,
                "target": 34,
                "value": 3
        }, {
            "source": 35,
                "target": 29,
                "value": 2
        }, {
            "source": 36,
                "target": 34,
                "value": 2
        }, {
            "source": 36,
                "target": 35,
                "value": 2
        }, {
            "source": 36,
                "target": 11,
                "value": 2
        }, {
            "source": 36,
                "target": 29,
                "value": 1
        }, {
            "source": 37,
                "target": 34,
                "value": 2
        }, {
            "source": 37,
                "target": 35,
                "value": 2
        }, {
            "source": 37,
                "target": 36,
                "value": 2
        }, {
            "source": 37,
                "target": 11,
                "value": 2
        }, {
            "source": 37,
                "target": 29,
                "value": 1
        }, {
            "source": 38,
                "target": 34,
                "value": 2
        }, {
            "source": 38,
                "target": 35,
                "value": 2
        }, {
            "source": 38,
                "target": 36,
                "value": 2
        }, {
            "source": 38,
                "target": 37,
                "value": 2
        }, {
            "source": 38,
                "target": 11,
                "value": 2
        }, {
            "source": 38,
                "target": 29,
                "value": 1
        }, {
            "source": 39,
                "target": 25,
                "value": 1
        }, {
            "source": 40,
                "target": 25,
                "value": 1
        }, {
            "source": 41,
                "target": 24,
                "value": 2
        }, {
            "source": 41,
                "target": 25,
                "value": 3
        }, {
            "source": 42,
                "target": 41,
                "value": 2
        }, {
            "source": 42,
                "target": 25,
                "value": 2
        }, {
            "source": 42,
                "target": 24,
                "value": 1
        }, {
            "source": 43,
                "target": 11,
                "value": 3
        }, {
            "source": 43,
                "target": 26,
                "value": 1
        }, {
            "source": 43,
                "target": 27,
                "value": 1
        }, {
            "source": 44,
                "target": 28,
                "value": 3
        }, {
            "source": 44,
                "target": 11,
                "value": 1
        }, {
            "source": 45,
                "target": 28,
                "value": 2
        }, {
            "source": 47,
                "target": 46,
                "value": 1
        }, {
            "source": 48,
                "target": 47,
                "value": 2
        }, {
            "source": 48,
                "target": 25,
                "value": 1
        }, {
            "source": 48,
                "target": 27,
                "value": 1
        }, {
            "source": 48,
                "target": 11,
                "value": 1
        }, {
            "source": 49,
                "target": 26,
                "value": 3
        }, {
            "source": 49,
                "target": 11,
                "value": 2
        }, {
            "source": 50,
                "target": 49,
                "value": 1
        }, {
            "source": 50,
                "target": 24,
                "value": 1
        }, {
            "source": 51,
                "target": 49,
                "value": 9
        }, {
            "source": 51,
                "target": 26,
                "value": 2
        }, {
            "source": 51,
                "target": 11,
                "value": 2
        }, {
            "source": 52,
                "target": 51,
                "value": 1
        }, {
            "source": 52,
                "target": 39,
                "value": 1
        }, {
            "source": 53,
                "target": 51,
                "value": 1
        }, {
            "source": 54,
                "target": 51,
                "value": 2
        }, {
            "source": 54,
                "target": 49,
                "value": 1
        }, {
            "source": 54,
                "target": 26,
                "value": 1
        }, {
            "source": 55,
                "target": 51,
                "value": 6
        }, {
            "source": 55,
                "target": 49,
                "value": 12
        }, {
            "source": 55,
                "target": 39,
                "value": 1
        }, {
            "source": 55,
                "target": 54,
                "value": 1
        }, {
            "source": 55,
                "target": 26,
                "value": 21
        }, {
            "source": 55,
                "target": 11,
                "value": 19
        }, {
            "source": 55,
                "target": 16,
                "value": 1
        }, {
            "source": 55,
                "target": 25,
                "value": 2
        }, {
            "source": 55,
                "target": 41,
                "value": 5
        }, {
            "source": 55,
                "target": 48,
                "value": 4
        }, {
            "source": 56,
                "target": 49,
                "value": 1
        }, {
            "source": 56,
                "target": 55,
                "value": 1
        }, {
            "source": 57,
                "target": 55,
                "value": 1
        }, {
            "source": 57,
                "target": 41,
                "value": 1
        }, {
            "source": 57,
                "target": 48,
                "value": 1
        }, {
            "source": 58,
                "target": 55,
                "value": 7
        }, {
            "source": 58,
                "target": 48,
                "value": 7
        }, {
            "source": 58,
                "target": 27,
                "value": 6
        }, {
            "source": 58,
                "target": 57,
                "value": 1
        }, {
            "source": 58,
                "target": 11,
                "value": 4
        }, {
            "source": 59,
                "target": 58,
                "value": 15
        }, {
            "source": 59,
                "target": 55,
                "value": 5
        }, {
            "source": 59,
                "target": 48,
                "value": 6
        }, {
            "source": 59,
                "target": 57,
                "value": 2
        }, {
            "source": 60,
                "target": 48,
                "value": 1
        }, {
            "source": 60,
                "target": 58,
                "value": 4
        }, {
            "source": 60,
                "target": 59,
                "value": 2
        }, {
            "source": 61,
                "target": 48,
                "value": 2
        }, {
            "source": 61,
                "target": 58,
                "value": 6
        }, {
            "source": 61,
                "target": 60,
                "value": 2
        }, {
            "source": 61,
                "target": 59,
                "value": 5
        }, {
            "source": 61,
                "target": 57,
                "value": 1
        }, {
            "source": 61,
                "target": 55,
                "value": 1
        }, {
            "source": 62,
                "target": 55,
                "value": 9
        }, {
            "source": 62,
                "target": 58,
                "value": 17
        }, {
            "source": 62,
                "target": 59,
                "value": 13
        }, {
            "source": 62,
                "target": 48,
                "value": 7
        }, {
            "source": 62,
                "target": 57,
                "value": 2
        }, {
            "source": 62,
                "target": 41,
                "value": 1
        }, {
            "source": 62,
                "target": 61,
                "value": 6
        }, {
            "source": 62,
                "target": 60,
                "value": 3
        }, {
            "source": 63,
                "target": 59,
                "value": 5
        }, {
            "source": 63,
                "target": 48,
                "value": 5
        }, {
            "source": 63,
                "target": 62,
                "value": 6
        }, {
            "source": 63,
                "target": 57,
                "value": 2
        }, {
            "source": 63,
                "target": 58,
                "value": 4
        }, {
            "source": 63,
                "target": 61,
                "value": 3
        }, {
            "source": 63,
                "target": 60,
                "value": 2
        }, {
            "source": 63,
                "target": 55,
                "value": 1
        }, {
            "source": 64,
                "target": 55,
                "value": 5
        }, {
            "source": 64,
                "target": 62,
                "value": 12
        }, {
            "source": 64,
                "target": 48,
                "value": 5
        }, {
            "source": 64,
                "target": 63,
                "value": 4
        }, {
            "source": 64,
                "target": 58,
                "value": 10
        }, {
            "source": 64,
                "target": 61,
                "value": 6
        }, {
            "source": 64,
                "target": 60,
                "value": 2
        }, {
            "source": 64,
                "target": 59,
                "value": 9
        }, {
            "source": 64,
                "target": 57,
                "value": 1
        }, {
            "source": 64,
                "target": 11,
                "value": 1
        }, {
            "source": 65,
                "target": 63,
                "value": 5
        }, {
            "source": 65,
                "target": 64,
                "value": 7
        }, {
            "source": 65,
                "target": 48,
                "value": 3
        }, {
            "source": 65,
                "target": 62,
                "value": 5
        }, {
            "source": 65,
                "target": 58,
                "value": 5
        }, {
            "source": 65,
                "target": 61,
                "value": 5
        }, {
            "source": 65,
                "target": 60,
                "value": 2
        }, {
            "source": 65,
                "target": 59,
                "value": 5
        }, {
            "source": 65,
                "target": 57,
                "value": 1
        }, {
            "source": 65,
                "target": 55,
                "value": 2
        }, {
            "source": 66,
                "target": 64,
                "value": 3
        }, {
            "source": 66,
                "target": 58,
                "value": 3
        }, {
            "source": 66,
                "target": 59,
                "value": 1
        }, {
            "source": 66,
                "target": 62,
                "value": 2
        }, {
            "source": 66,
                "target": 65,
                "value": 2
        }, {
            "source": 66,
                "target": 48,
                "value": 1
        }, {
            "source": 66,
                "target": 63,
                "value": 1
        }, {
            "source": 66,
                "target": 61,
                "value": 1
        }, {
            "source": 66,
                "target": 60,
                "value": 1
        }, {
            "source": 67,
                "target": 57,
                "value": 3
        }, {
            "source": 68,
                "target": 25,
                "value": 5
        }, {
            "source": 68,
                "target": 11,
                "value": 1
        }, {
            "source": 68,
                "target": 24,
                "value": 1
        }, {
            "source": 68,
                "target": 27,
                "value": 1
        }, {
            "source": 68,
                "target": 48,
                "value": 1
        }, {
            "source": 68,
                "target": 41,
                "value": 1
        }, {
            "source": 69,
                "target": 25,
                "value": 6
        }, {
            "source": 69,
                "target": 68,
                "value": 6
        }, {
            "source": 69,
                "target": 11,
                "value": 1
        }, {
            "source": 69,
                "target": 24,
                "value": 1
        }, {
            "source": 69,
                "target": 27,
                "value": 2
        }, {
            "source": 69,
                "target": 48,
                "value": 1
        }, {
            "source": 69,
                "target": 41,
                "value": 1
        }, {
            "source": 70,
                "target": 25,
                "value": 4
        }, {
            "source": 70,
                "target": 69,
                "value": 4
        }, {
            "source": 70,
                "target": 68,
                "value": 4
        }, {
            "source": 70,
                "target": 11,
                "value": 1
        }, {
            "source": 70,
                "target": 24,
                "value": 1
        }, {
            "source": 70,
                "target": 27,
                "value": 1
        }, {
            "source": 70,
                "target": 41,
                "value": 1
        }, {
            "source": 70,
                "target": 58,
                "value": 1
        }, {
            "source": 71,
                "target": 27,
                "value": 1
        }, {
            "source": 71,
                "target": 69,
                "value": 2
        }, {
            "source": 71,
                "target": 68,
                "value": 2
        }, {
            "source": 71,
                "target": 70,
                "value": 2
        }, {
            "source": 71,
                "target": 11,
                "value": 1
        }, {
            "source": 71,
                "target": 48,
                "value": 1
        }, {
            "source": 71,
                "target": 41,
                "value": 1
        }, {
            "source": 71,
                "target": 25,
                "value": 1
        }, {
            "source": 72,
                "target": 26,
                "value": 2
        }, {
            "source": 72,
                "target": 27,
                "value": 1
        }, {
            "source": 72,
                "target": 11,
                "value": 1
        }, {
            "source": 73,
                "target": 48,
                "value": 2
        }, {
            "source": 74,
                "target": 48,
                "value": 2
        }, {
            "source": 74,
                "target": 73,
                "value": 3
        }, {
            "source": 75,
                "target": 69,
                "value": 3
        }, {
            "source": 75,
                "target": 68,
                "value": 3
        }, {
            "source": 75,
                "target": 25,
                "value": 3
        }, {
            "source": 75,
                "target": 48,
                "value": 1
        }, {
            "source": 75,
                "target": 41,
                "value": 1
        }, {
            "source": 75,
                "target": 70,
                "value": 1
        }, {
            "source": 75,
                "target": 71,
                "value": 1
        }, {
            "source": 76,
                "target": 64,
                "value": 1
        }, {
            "source": 76,
                "target": 65,
                "value": 1
        }, {
            "source": 76,
                "target": 66,
                "value": 1
        }, {
            "source": 76,
                "target": 63,
                "value": 1
        }, {
            "source": 76,
                "target": 62,
                "value": 1
        }, {
            "source": 76,
                "target": 48,
                "value": 1
        }, {
            "source": 76,
                "target": 58,
                "value": 1
        }]
    }
</script>

<script src="//d3js.org/d3.v3.min.js"></script>

<script>
//Constants for the SVG
var width = 800,
    height = 500;

//Set up the colour scale
var color = d3.scale.category10();

//Set up the force layout
var force = d3.layout.force()
    .charge(-120)
    .linkDistance(100)
    .size([width, height]);

//Append a SVG to the body of the html page. Assign this SVG as an object to svg
var svg = d3.select("#forceLay").append("svg")
    .attr("width", width)
    .attr("height", height);

//Read the data from the mis element 
var mis = document.getElementById('mis').innerHTML;
graph = JSON.parse(mis);

//Creates the graph data structure out of the json data
force.nodes(graph.nodes)
    .links(graph.links)
    .start();

//Create all the line svgs but without locations yet
var link = svg.selectAll(".link")
    .data(graph.links)
    .enter().append("line")
    .attr("class", "link")
    .style("stroke-width", function (d) {
    return Math.sqrt(d.value);
});

//Do the same with the circles for the nodes - no 
//Changed
var node = svg.selectAll(".node")
    .data(graph.nodes)
    .enter().append("g")
    .attr("class", "node")
    .call(force.drag);

node.append("circle")
    .attr("r", 10)
    .style("fill", function (d) {
    return color(d.group);
})

node.append("text")
      .attr("dx", 10)
      .attr("dy", ".35em")
      .text(function(d) { return d.name });
//End changed


//Now we are giving the SVGs co-ordinates - the force layout is generating the co-ordinates which this code is using to update the attributes of the SVG elements
force.on("tick", function () {
    link.attr("x1", function (d) {
        return d.source.x;
    })
        .attr("y1", function (d) {
        return d.source.y;
    })
        .attr("x2", function (d) {
        return d.target.x;
    })
        .attr("y2", function (d) {
        return d.target.y;
    });

    //Changed
    
    d3.selectAll("circle").attr("cx", function (d) {
        return d.x;
    })
        .attr("cy", function (d) {
        return d.y;
    });

    d3.selectAll("text").attr("x", function (d) {
        return d.x;
    })
        .attr("y", function (d) {
        return d.y;
    });
    
    //End Changed

});
</script>

 ]]></content>
</entry>


  <entry>
  <title type="text">Time-Series Bubble Map</title>
  <link rel="alternate" type="text/html" href="http://santhosh114.github.io//bubbleMap.html" />
  <id>http://santhosh114.github.io//bubbleMap</id>
  <published>2015-02-13T00:00:00Z</published>
  <updated>2015-02-13T00:00:00Z</updated>
  <content type="html"><![CDATA[ <script src="//code.jquery.com/jquery-2.0.0.js"></script>

<style>

          .airports {
          fill: #036;
          stroke: #6cb0e0;
          stroke-width: 0.5px;
          stroke-linecap: round;
          stroke-linejoin: round;
          vector-effect: non-scaling-stroke;
                }
      </style>

<script src="//d3js.org/d3.v3.min.js"></script>

<script src="//d3js.org/topojson.v1.min.js"></script>

<div id="us_states"></div>
<script type="text/javascript">
  (function() {

     var m_width = $("#us_states").width(),
          width = 1060,
          height = 600,
          country,
          state;

      var projection = d3.geo.albersUsa()
      .scale(1060)
      .translate([width / 2, height / 2])
      .precision(.1);

  var path = d3.geo.path()
      .projection(projection);



       var svg = d3.select("#us_states").append("svg")
          .attr("preserveAspectRatio", "xMidYMid")
          .attr("viewBox", "0 0 " + width + " " + height)
          .attr("width", m_width)
          .attr("height", m_width * height / width);

 var start_val = 1987,
                                                              end_val = [2008];
                                                          var clock = svg.append("svg")
                                                                    .attr("y", 100)
                                                                    .attr("x", 700)
                                                                    .style( {'font-weight':'bold', 'font-family':'sans-serif',
                                                                              'font-size':'30px'})  
                                                                    .attr("fill", "steelblue");

                                                              clock.selectAll(".txt")
                                                              .data(end_val)
                                                              .enter()
                                                              .append("text")
                                                              .text(start_val)
                                                              .attr("class", "txt")
                                                              .attr("x", 10)
                                                              .attr("y", 25)
                                                              .transition()
                                                              .duration(20900)
                                                                  .tween("text", function(d) {
                                                                      var i = d3.interpolate(this.textContent, d),
                                                                          prec = (d + "").split("."),
                                                                          round = (prec.length > 1) ? Math.pow(10, prec[1].length) : 1;

                                                                      return function(t) {
                                                                          this.textContent = Math.round(i(t) * round) / round;
                                                                      };
                                                                  });

                                                          svg.append("text")
                                                                    .attr("y", 570)
                                                                    .attr("x", 320)
                                                                    .style( {'font-weight':'bold', 'font-family':'sans-serif',
                                                                              'font-size':'10px'})
                                                                    .style("opacity", "0.9") 
                                                                    .attr("fill", "#595959")
                                                                    .text("Total Flights:");



                                                          var start_val = 135469,
                                                              end_val = [62135469];
                                                          var total_flights = svg.append("svg")
                                                                    .attr("y", 550)
                                                                    .attr("x", 380)
                                                                    .style( {'font-weight':'bold', 'font-family':'sans-serif',
                                                                              'font-size':'20px'})
                                                                    .style("opacity", "0.9") 
                                                                    .attr("fill", "steelblue");

                                                              total_flights.selectAll(".txt")
                                                              .data(end_val)
                                                              .enter()
                                                              .append("text")
                                                              .text(start_val)
                                                              .attr("class", "txt")
                                                              .attr("x", 10)
                                                              .attr("y", 25)
                                                              .transition()
                                                              .duration(17000)
                                                                  .tween("text", function(d) {
                                                                      var i = d3.interpolate(this.textContent, d),
                                                                          prec = (d + "").split("."),
                                                                          round = (prec.length > 1) ? Math.pow(10, prec[1].length) : 1;

                                                                      return function(t) {
                                                                          this.textContent = Math.round(i(t) * round) / round;
                                                                      };
                                                                  });

                                                          svg.append("text")
                                                                    .attr("y", 570)
                                                                    .attr("x", 520)
                                                                    .style( {'font-weight':'bold', 'font-family':'sans-serif',
                                                                              'font-size':'10px'})
                                                                    .style("opacity", "0.9") 
                                                                    .attr("fill", "#595959")
                                                                    .text("Incount:");


                                                          var start_val = 1469,
                                                              end_val = [23365469];
                                                          var total_flights = svg.append("svg")
                                                                    .attr("y", 550)
                                                                    .attr("x", 560)
                                                                    .style( {'font-weight':'bold', 'font-family':'sans-serif',
                                                                              'font-size':'20px'})
                                                                    .style("opacity", "0.9") 
                                                                    .attr("fill", "steelblue");

                                                              total_flights.selectAll(".txt")
                                                              .data(end_val)
                                                              .enter()
                                                              .append("text")
                                                              .text(start_val)
                                                              .attr("class", "txt")
                                                              .attr("x", 10)
                                                              .attr("y", 25)
                                                              .transition()
                                                              .duration(17000)
                                                                  .tween("text", function(d) {
                                                                      var i = d3.interpolate(this.textContent, d),
                                                                          prec = (d + "").split("."),
                                                                          round = (prec.length > 1) ? Math.pow(10, prec[1].length) : 1;

                                                                      return function(t) {
                                                                          this.textContent = Math.round(i(t) * round) / round;
                                                                      };
                                                                  });

                                                          svg.append("text")
                                                                    .attr("y", 570)
                                                                    .attr("x", 680)
                                                                    .style( {'font-weight':'bold', 'font-family':'sans-serif',
                                                                              'font-size':'10px'})
                                                                    .style("opacity", "0.9") 
                                                                    .attr("fill", "#595959")
                                                                    .text("Outcount:");

                                                          var start_val = 35469,
                                                              end_val = [38525469];
                                                          var total_flights = svg.append("svg")
                                                                    .attr("y", 550)
                                                                    .attr("x", 730)
                                                                    .style( {'font-weight':'bold', 'font-family':'sans-serif',
                                                                              'font-size':'20px'})
                                                                    .style("opacity", "0.9") 
                                                                    .attr("fill", "steelblue");

                                                              total_flights.selectAll(".txt")
                                                              .data(end_val)
                                                              .enter()
                                                              .append("text")
                                                              .text(start_val)
                                                              .attr("class", "txt")
                                                              .attr("x", 10)
                                                              .attr("y", 25)
                                                              .transition()
                                                              .duration(17000)
                                                                  .tween("text", function(d) {
                                                                      var i = d3.interpolate(this.textContent, d),
                                                                          prec = (d + "").split("."),
                                                                          round = (prec.length > 1) ? Math.pow(10, prec[1].length) : 1;

                                                                      return function(t) {
                                                                          this.textContent = Math.round(i(t) * round) / round;
                                                                      };
                                                                  });
   d3.json("../geoSample/us.json", function(error, us) {
    if (error) return console.error(error);
    console.log(us);

    svg.selectAll("path")
        .data(topojson.feature(us, us.objects.states).features)
        .enter()
        .append("path")
        .attr("d", path)
        .attr("fill", "LightGray")
        .attr("stroke", "White");

      var  sampleData = [{name: "San Francisco", coordinates: [-122.417,37.783], barheight: 50,airportName:"San Francisco International Airport", airportCode:"SFO"},
    {name: "Los Angeles", coordinates: [-118.682,33.52], barheight: 40,airportName:"Los Angeles International Airport", airportCode:"LAX"},
    {name: "Denver", coordinates: [-104.8778,39.673], barheight: 37,airportName:"Denver International Airport", airportCode:"DEN"},    
    {name: "St. Louis", coordinates: [-90.505,38.788], barheight: 33,airportName:"Lambert-St. Louis International Airport", airportCode:"STL"},
    {name: "Atlanta", coordinates: [-84.682,33.52], barheight: 45,airportName:"Atlanta International Airport", airportCode:"ATL"},
    {name: "Arizona", coordinates: [-112.682,33.52], barheight: 27,airportName:"Phoenix Sky Harbor International Airport", airportCode:"PHX"},
    {name: "Minnesota", coordinates: [-93.682,44.52], barheight: 22,airportName:"St. Paul International Airport", airportCode:"MSP"},
    {name: "Chicago", coordinates: [-87.9067,41.988], barheight: 47,airportName:"Chicago O'hare International Airport", airportCode:"ORD"},
    {name: "Detroit", coordinates: [-83.417,42.783], barheight: 27,airportName:"Detroit Metro Airport", airportCode:"DTW"},
     {name: "Pittsburg", coordinates: [-80.682,40.52], barheight: 25,airportName:"Pittsburgh International Airport", airportCode:"PIT"},
      {name: "Charlotte", coordinates: [-80.682,35.52], barheight: 24,airportName:"Douglas International Airport", airportCode:"CLT"},
       {name: "New Jersey", coordinates: [-74.1682,41.52], barheight: 30,airportName:"Newark Liberty International Airport", airportCode:"EWR"},
     {name: "New York", coordinates: [-73.682,40.0952], barheight: 42,airportName:"John F. Kennedy International Airport", airportCode:"JFK"},
    {name: "Boston", coordinates: [-71.505,42.488], barheight: 20,airportName:"Boston Logan International Airport", airportCode:"BOS"},
    {name: "Texas", coordinates: [-100.682,31.52], barheight: 20, airportName:"Bush Intercontinental Airport", airportCode:"IAH"},
    {name: "Florida", coordinates: [-81.682,28.52], barheight: 17,airportName:"Orlando International Airport", airportCode:"MCO"}            
    ];



    bars = svg.selectAll("g")
    .data(sampleData)
    .enter()
    .append("g")
    .attr("class", "bars")
    .attr("transform", function(d) {return "translate(" + projection(d.coordinates) + ")";});
    
    bars.append("circle")
    .attr("cx", function (d) { return d.x_axis; })
    .attr("cy", function (d) { return d.y_axis; })
    .attr("class", "bars")
    .attr("r", 6)
    .style("fill", "green")
    .style("stroke", "White")
    .style("stroke-width", 0.5)
    .style("opacity", 0.5)
    .transition()
    .delay(function(d, i) {
          return i * 20;
      })
      .duration(15000) 
      
    .attr("r", function (d) { return d.barheight; });

bars.append("text")
      .style({
        'fill':'#050505',
        'font-family':'sans-serif',
        'font-size':'7px'
      })  
             .attr("dy", ".80em")
    .attr("text-anchor", "start") 
    .text(function(d) {return d.name});
  });







  $(window).resize(function() {
        var w = $("#us_states").width();
        svg.attr("width", w);
        svg.attr("height", w * height / width);
      });

  })();
</script>

<h3 id="overview"><a href="">Overview:</a></h3>

<p>This is a walkthrough of my project on creating interactive transitions using tween functions on objects tied to a map/geo-location in D3.js.</p>

<p>This US map is generated from the <a href="../geoSample/us.json">US.json</a></p>

<h3 id="data"><a href="">Data:</a></h3>
<p>Sample of data used for this infograph with variable derived from Python data manupulation on <a href="http://stat-computing.org/dataexpo/2009/the-data.html">AirportStats flights delay dataset</a>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span>  <span class="nx">sampleData</span> <span class="o">=</span> <span class="p">[{</span><span class="na">name</span><span class="p">:</span> <span class="s2">"San Francisco"</span><span class="p">,</span> <span class="na">coordinates</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">122.417</span><span class="p">,</span><span class="mf">37.783</span><span class="p">],</span> <span class="na">barheight</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span><span class="na">airportName</span><span class="p">:</span><span class="s2">"San Francisco International Airport"</span><span class="p">,</span> <span class="na">airportCode</span><span class="p">:</span><span class="s2">"SFO"</span><span class="p">},</span>
    <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="s2">"Los Angeles"</span><span class="p">,</span> <span class="na">coordinates</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">118.682</span><span class="p">,</span><span class="mf">33.52</span><span class="p">],</span> <span class="na">barheight</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span><span class="na">airportName</span><span class="p">:</span><span class="s2">"Los Angeles International Airport"</span><span class="p">,</span> <span class="na">airportCode</span><span class="p">:</span><span class="s2">"LAX"</span><span class="p">},</span>
    <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="s2">"Denver"</span><span class="p">,</span> <span class="na">coordinates</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">104.8778</span><span class="p">,</span><span class="mf">39.673</span><span class="p">],</span> <span class="na">barheight</span><span class="p">:</span> <span class="mi">37</span><span class="p">,</span><span class="na">airportName</span><span class="p">:</span><span class="s2">"Denver International Airport"</span><span class="p">,</span> <span class="na">airportCode</span><span class="p">:</span><span class="s2">"DEN"</span><span class="p">},</span>    
    <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="s2">"St. Louis"</span><span class="p">,</span> <span class="na">coordinates</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">90.505</span><span class="p">,</span><span class="mf">38.788</span><span class="p">],</span> <span class="na">barheight</span><span class="p">:</span> <span class="mi">33</span><span class="p">,</span><span class="na">airportName</span><span class="p">:</span><span class="s2">"Lambert-St. Louis International Airport"</span><span class="p">,</span> <span class="na">airportCode</span><span class="p">:</span><span class="s2">"STL"</span><span class="p">},</span>
    <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="s2">"Atlanta"</span><span class="p">,</span> <span class="na">coordinates</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">84.682</span><span class="p">,</span><span class="mf">33.52</span><span class="p">],</span> <span class="na">barheight</span><span class="p">:</span> <span class="mi">45</span><span class="p">,</span><span class="na">airportName</span><span class="p">:</span><span class="s2">"Atlanta International Airport"</span><span class="p">,</span> <span class="na">airportCode</span><span class="p">:</span><span class="s2">"ATL"</span><span class="p">},</span>
    <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="s2">"Arizona"</span><span class="p">,</span> <span class="na">coordinates</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">112.682</span><span class="p">,</span><span class="mf">33.52</span><span class="p">],</span> <span class="na">barheight</span><span class="p">:</span> <span class="mi">27</span><span class="p">,</span><span class="na">airportName</span><span class="p">:</span><span class="s2">"Phoenix Sky Harbor International Airport"</span><span class="p">,</span> <span class="na">airportCode</span><span class="p">:</span><span class="s2">"PHX"</span><span class="p">},</span>
    <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="s2">"Minnesota"</span><span class="p">,</span> <span class="na">coordinates</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">93.682</span><span class="p">,</span><span class="mf">44.52</span><span class="p">],</span> <span class="na">barheight</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span><span class="na">airportName</span><span class="p">:</span><span class="s2">"St. Paul International Airport"</span><span class="p">,</span> <span class="na">airportCode</span><span class="p">:</span><span class="s2">"MSP"</span><span class="p">},</span>
    <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="s2">"Chicago"</span><span class="p">,</span> <span class="na">coordinates</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">87.9067</span><span class="p">,</span><span class="mf">41.988</span><span class="p">],</span> <span class="na">barheight</span><span class="p">:</span> <span class="mi">47</span><span class="p">,</span><span class="na">airportName</span><span class="p">:</span><span class="s2">"Chicago O'hare International Airport"</span><span class="p">,</span> <span class="na">airportCode</span><span class="p">:</span><span class="s2">"ORD"</span><span class="p">},</span>
    <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="s2">"Detroit"</span><span class="p">,</span> <span class="na">coordinates</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">83.417</span><span class="p">,</span><span class="mf">42.783</span><span class="p">],</span> <span class="na">barheight</span><span class="p">:</span> <span class="mi">27</span><span class="p">,</span><span class="na">airportName</span><span class="p">:</span><span class="s2">"Detroit Metro Airport"</span><span class="p">,</span> <span class="na">airportCode</span><span class="p">:</span><span class="s2">"DTW"</span><span class="p">},</span>
     <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="s2">"Pittsburg"</span><span class="p">,</span> <span class="na">coordinates</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">80.682</span><span class="p">,</span><span class="mf">40.52</span><span class="p">],</span> <span class="na">barheight</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span><span class="na">airportName</span><span class="p">:</span><span class="s2">"Pittsburgh International Airport"</span><span class="p">,</span> <span class="na">airportCode</span><span class="p">:</span><span class="s2">"PIT"</span><span class="p">},</span>
      <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="s2">"Charlotte"</span><span class="p">,</span> <span class="na">coordinates</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">80.682</span><span class="p">,</span><span class="mf">35.52</span><span class="p">],</span> <span class="na">barheight</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span><span class="na">airportName</span><span class="p">:</span><span class="s2">"Douglas International Airport"</span><span class="p">,</span> <span class="na">airportCode</span><span class="p">:</span><span class="s2">"CLT"</span><span class="p">},</span>
       <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="s2">"New Jersey"</span><span class="p">,</span> <span class="na">coordinates</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">74.1682</span><span class="p">,</span><span class="mf">41.52</span><span class="p">],</span> <span class="na">barheight</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span><span class="na">airportName</span><span class="p">:</span><span class="s2">"Newark Liberty International Airport"</span><span class="p">,</span> <span class="na">airportCode</span><span class="p">:</span><span class="s2">"EWR"</span><span class="p">},</span>
     <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="s2">"New York"</span><span class="p">,</span> <span class="na">coordinates</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">73.682</span><span class="p">,</span><span class="mf">40.0952</span><span class="p">],</span> <span class="na">barheight</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span><span class="na">airportName</span><span class="p">:</span><span class="s2">"John F. Kennedy International Airport"</span><span class="p">,</span> <span class="na">airportCode</span><span class="p">:</span><span class="s2">"JFK"</span><span class="p">},</span>
    <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="s2">"Boston"</span><span class="p">,</span> <span class="na">coordinates</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">71.505</span><span class="p">,</span><span class="mf">42.488</span><span class="p">],</span> <span class="na">barheight</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span><span class="na">airportName</span><span class="p">:</span><span class="s2">"Boston Logan International Airport"</span><span class="p">,</span> <span class="na">airportCode</span><span class="p">:</span><span class="s2">"BOS"</span><span class="p">},</span>
    <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="s2">"Texas"</span><span class="p">,</span> <span class="na">coordinates</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">100.682</span><span class="p">,</span><span class="mf">31.52</span><span class="p">],</span> <span class="na">barheight</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="na">airportName</span><span class="p">:</span><span class="s2">"Bush Intercontinental Airport"</span><span class="p">,</span> <span class="na">airportCode</span><span class="p">:</span><span class="s2">"IAH"</span><span class="p">},</span>
    <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="s2">"Florida"</span><span class="p">,</span> <span class="na">coordinates</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">81.682</span><span class="p">,</span><span class="mf">28.52</span><span class="p">],</span> <span class="na">barheight</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span><span class="na">airportName</span><span class="p">:</span><span class="s2">"Orlando International Airport"</span><span class="p">,</span> <span class="na">airportCode</span><span class="p">:</span><span class="s2">"MCO"</span><span class="p">}</span>            
    <span class="p">];</span></code></pre></figure>

 ]]></content>
</entry>


  <entry>
  <title type="text">Neo4j Based Graph Schema for Facebook’s Friends Network</title>
  <link rel="alternate" type="text/html" href="http://santhosh114.github.io//neo4j.html" />
  <id>http://santhosh114.github.io//neo4j</id>
  <published>2015-01-19T00:00:00Z</published>
  <updated>2015-01-19T00:00:00Z</updated>
  <content type="html"><![CDATA[ <style>.container {
  width: auto;
  max-width: 800px;
  text-align: center;

}
</style>

<p><img src="../static/img/blog/fbschema/main.png" alt="Test Image" style="width:704px;height:503px;" /></p>

<blockquote>
  <p>This is an extract of my inclass presentations of Z604:Big Data Analytics for Web and Text course at <a href="https://www.indiana.edu">Indiana University, Bloomington</a>. Instructor: <a href="https://www.ils.indiana.edu/people/profile.html?profile_id=100">Xiaozhong Liu</a></p>
</blockquote>

<div class="divider"></div>

<h3 id="objective"><a href="">Objective:</a></h3>

<p>To host a very large and complex data such as the Facebook’s friends network graph data.</p>
<p><img src="../static/img/blog/fbschema/complex.png" alt="Test Image" style="width:704px;height:79px;" /></p>
<p>Provide efficient data search and access. </p>

<ul>
  <li>A traditional RDBMS model</li>
  <li>Drawbacks of Relational model</li>
  <li>A more efficient Graph Data Model</li>
  <li>Timeline Trees</li>
</ul>

<div class="divider"></div>

<h3 id="limitations-of-relational-data-model"><a href="">Limitations of Relational Data Model:</a></h3>

<p>A typical query in connected data model involves JOIN operations between tables.    
This leads to expensive search computation.</p>
<p><img src="../static/img/blog/fbschema/limit.png" alt="Test Image" style="width:704px;height:450px;" /></p>
<p><a href="http://neo4j.com/developer/graph-db-vs-rdbms/">Image Source</a>
Find more at <a href="http://neo4j.com/developer/graph-db-vs-rdbms/">Neo4j discussion on Graph DB vs RDBMS</a></p>

<div class="divider"></div>

<h3 id="graph-relationship-model"><a href="">Graph Relationship Model:</a></h3>

<h5 id="why-graph-database">Why Graph Database?</h5>
<ul>
  <li>Graph Schema: The best possible abstraction for modeling connectedness.</li>
  <li>
    <p>Data model that evolves in step with the iterative and incremental development.
        - Rewritable Schema: Can add nodes and relationships dynamically</p>
  </li>
  <li>Answers by traversing (querying) the graph rather than resorting to latent map-reduce computations.</li>
  <li>Memory use or Latency of a query with a join is obliterated</li>
  <li>Average Speed of Graph Database
        - 4 million nodes/ sec!</li>
  <li>Geared towards Pattern Mining – the search queries natively look for patterns.
Eg. It searches Common Friends based on common profile properties such as
                          - Location
                          - Education
                          - Work etc.</li>
</ul>

<div class="divider"></div>

<h3 id="graph-schema-entities"><a href="">Graph Schema Entities:</a></h3>

<h5 id="node">Node</h5>
<ul>
  <li>Node is an entity bag/object containing attributes 
             {eg. – name, age, location etc. }</li>
  <li>Relationship is a named &amp; directed entity that produce a schematic structure</li>
  <li>It can have properties like strength/weight, cardinality</li>
  <li>Weights in relationships are used for shortest path traversals</li>
</ul>

<div class="divider"></div>

<h3 id="labeled-property-graphneo4j">Labeled property graph<a href="">(neo4j)</a></h3>

<p><img src="../static/img/blog/fbschema/share copy.png" alt="Test Image" style="width:345px;height:201px;" /></p>
<p>Labels in property graph facilitate defining &amp; finding patterns using ASCII –Art &amp; deriving instances that contain a path expression</p>

<figure class="highlight"><pre><code class="language-css" data-lang="css">   <span class="o">(</span><span class="nt">person</span><span class="o">)</span><span class="nt">-</span><span class="o">[</span><span class="nd">:LIKE</span><span class="o">]</span><span class="nt">-</span><span class="o">&gt;(</span><span class="nt">thing</span><span class="o">)</span> </code></pre></figure>

<p>Similar objects can contain different set of properties in a Labeled property graph!</p>

<div class="divider"></div>

<h3 id="timeline-trees"><a href="">Timeline Trees:</a></h3>

<p>To search posts/events over a specific period of time.</p>
<p><img src="../static/img/blog/fbschema/template.png" alt="Test Image" style="width:704px;height:560px;" /></p>

 ]]></content>
</entry>



</feed>
